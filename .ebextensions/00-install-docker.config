commands:
  01_update_apt:
    command: if ! apt list --upgradable 2>/dev/null | grep -q "upgradable"; then sudo apt update -y; fi

  02_install_docker:
    command: |
      if ! command -v docker &> /dev/null; then
        sudo apt install -y docker.io
        sudo systemctl start docker
        sudo systemctl enable docker
        sudo usermod -aG docker ubuntu
      else
        echo "Docker is already installed"
      fi

  03_install_docker_compose:
    command: |
      if ! command -v docker-compose &> /dev/null; then
        sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
        sudo chmod +x /usr/local/bin/docker-compose
      fi
